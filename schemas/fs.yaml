# File system related schemas

FsObject:
  type: object
  properties:
    id:
      type: string
      description: Object ID (may be empty for local storage)
      example: ""
    path:
      type: string
      description: Full system path
      example: "D:\\files\\document.pdf"
    name:
      type: string
      description: File or directory name
      example: document.pdf
    size:
      type: integer
      format: int64
      description: File size in bytes (0 for directories)
      example: 1024000
    is_dir:
      type: boolean
      description: Whether this is a directory
      example: false
    modified:
      type: string
      format: date-time
      description: Last modified time
      example: "2025-10-20T15:30:00+08:00"
    created:
      type: string
      format: date-time
      description: Creation time
      example: "2025-10-20T10:00:00+08:00"
    sign:
      type: string
      description: Signature for download authentication
      example: "YBgnmykwCXUstXvNGtECaz_12gseXSL03cpqh5rTcGA=:0"
    thumb:
      type: string
      description: Thumbnail URL (if available)
      example: ""
    type:
      type: integer
      description: |
        File type:
        0=Unknown, 1=Folder, 2=Video, 3=Audio, 4=Text, 5=Image
      example: 4
    hashinfo:
      type: string
      description: Hash information (JSON string or "null")
      example: "null"
    hash_info:
      type: object
      nullable: true
      additionalProperties:
        type: string
      description: Parsed hash information
      example: null
    mount_details:
      $ref: '#/StorageDetails'

FsListRequest:
  type: object
  properties:
    path:
      type: string
      description: Path to list
      default: /
      example: /
    password:
      type: string
      description: Password for protected paths
      example: ""
    refresh:
      type: boolean
      description: Force refresh cache
      default: false
    page:
      type: integer
      minimum: 1
      default: 1
    per_page:
      type: integer
      minimum: 1
      maximum: 100
      default: 30

FsListResponse:
  allOf:
    - $ref: './common.yaml#/ApiResponse'
    - type: object
      properties:
        data:
          type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/FsObject'
            total:
              type: integer
              description: Total number of items
              example: 14
            readme:
              type: string
              description: README content (if exists)
              example: ""
            header:
              type: string
              description: Header content
              example: ""
            write:
              type: boolean
              description: Whether current user has write permission
              example: true
            provider:
              type: string
              description: Storage provider name
              example: Local

FsGetRequest:
  type: object
  required:
    - path
  properties:
    path:
      type: string
      description: File or directory path
      example: /document.pdf
    password:
      type: string
      description: Password for protected paths
      example: ""

FsGetResponse:
  allOf:
    - $ref: './common.yaml#/ApiResponse'
    - type: object
      properties:
        data:
          $ref: '#/FsObject'

FsMkdirRequest:
  type: object
  required:
    - path
  properties:
    path:
      type: string
      description: Path where to create directory
      example: /newfolder

FsRenameRequest:
  type: object
  required:
    - path
    - name
  properties:
    path:
      type: string
      description: Current file/folder path
      example: /oldname.txt
    name:
      type: string
      description: New name
      example: newname.txt

FsMoveCopyRequest:
  type: object
  required:
    - src_dir
    - dst_dir
    - names
  properties:
    src_dir:
      type: string
      description: Source directory path
      example: /source
    dst_dir:
      type: string
      description: Destination directory path
      example: /destination
    names:
      type: array
      items:
        type: string
      description: List of file/folder names to move/copy
      example: ["file1.txt", "file2.pdf"]

FsRemoveRequest:
  type: object
  required:
    - dir
    - names
  properties:
    dir:
      type: string
      description: Directory containing files to remove
      example: /folder
    names:
      type: array
      items:
        type: string
      description: List of file/folder names to remove
      example: ["file1.txt", "file2.pdf"]

StorageDetails:
  type: object
  nullable: true
  properties:
    driver_name:
      type: string
      description: Storage driver name
      example: Local
    total_space:
      type: integer
      format: int64
      description: Total storage space in bytes
      example: 1000000000000
    free_space:
      type: integer
      format: int64
      description: Free storage space in bytes
      example: 500000000000
